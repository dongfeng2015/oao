@using AccountOpening.Models
@namespace AccountOpening.Components.Layout
@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.AspNetCore.Components

<div class="nav-scrollable">
    <nav class="flex-column">
        <div class="nav-section px-3">
            <h3>Account Opening</h3>
            <div class="nav-item">
                <NavLink href="account-opening" class=@($"nav-link {(IsStepAccessible(1) ? "" : "disabled")}")>
                    <span class="bi bi-person-fill" aria-hidden="true"></span> Personal Info
                </NavLink>
            </div>
            <div class="nav-item">
                <NavLink href="account-opening" class=@($"nav-link {(IsStepAccessible(2) ? "" : "disabled")}")>
                    <span class="bi bi-geo-alt-fill" aria-hidden="true"></span> Address
                </NavLink>
            </div>
            <div class="nav-item">
                <NavLink href="account-opening" class=@($"nav-link {(IsStepAccessible(3) ? "" : "disabled")}")>
                    <span class="bi bi-shield-fill" aria-hidden="true"></span> Identity
                </NavLink>
            </div>
        </div>
    </nav>
</div>

@code {
    [CascadingParameter]
    public AccountOpeningForm? FormData { get; set; }

    private bool IsStepAccessible(int step)
    {
        if (FormData == null) return step == 1;
        return step switch
        {
            1 => true,
            2 => !string.IsNullOrEmpty(FormData.FirstName) && !string.IsNullOrEmpty(FormData.LastName),
            3 => !string.IsNullOrEmpty(FormData.AddressLine1) && !string.IsNullOrEmpty(FormData.City) && !string.IsNullOrEmpty(FormData.State),
            _ => false
        };
    }
}